# JVM Heap Size (set according to your node's RAM, 50% of system RAM is typical)
-Xms2g
-Xmx2g

# Initial and maximum JVM heap size
# The default is set to 2GB. Adjust as needed for your deployment.

# GC Configuration
-XX:+UseG1GC
-XX:G1ReservePercent=25
-XX:InitiatingHeapOccupancyPercent=30
-XX:+UseStringDeduplication

# Log GC information (useful for troubleshooting)
-Xlog:gc*,gc+age=trace,safepoint:file=${ES_LOG_DIR}/gc.log:utctime,level,pid,tags:filecount=32,filesize=64m

# Elasticsearch system properties
-Dlog4j2.formatMsgNoLookups=true

# Reduce memory overhead (especially useful in containerized environments)
-XX:+AlwaysPreTouch
-XX:+HeapDumpOnOutOfMemoryError
-XX:HeapDumpPath=${ES_TMPDIR}
-XX:ErrorFile=${ES_LOG_DIR}/hs_err_pid%p.log

# Prevent the JVM from optimizing out thread contentions
-XX:+UnlockDiagnosticVMOptions
-XX:+DisableExplicitGC

# JVM flags for improved performance and stability
-XX:+ExitOnOutOfMemoryError
-XX:+UseCompressedOops
-XX:+UseTLAB

# Linux-specific optimizations
-Djdk.io.File.enablePOSIXRename=true
-Djava.awt.headless=true
-Dfile.encoding=UTF-8
-Djna.nosys=true
-Dio.netty.noUnsafe=true
-Dio.netty.noKeySetOptimization=true
-Dio.netty.recycler.maxCapacityPerThread=0
-Dio.netty.allocator.numDirectArenas=0

# Timezone and locale settings
-Duser.timezone=UTC
-Djava.locale.providers=COMPAT
